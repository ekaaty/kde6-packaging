From 6f7e06bf9e45d1036c397d3cc9d5128656701105 Mon Sep 17 00:00:00 2001
From: Vlad Zahorodnii <vlad.zahorodnii@kde.org>
Date: Wed, 29 Nov 2023 10:29:19 +0200
Subject: [PATCH 1/7] plugins/screencast: Clean up embedded cursor painting
 code

The MVP uniform is set twice, in addition to that, the cursor size is
scaled more than once.
---
 src/plugins/screencast/screencaststream.cpp | 23 +++++----------------
 src/plugins/screencast/screencaststream.h   |  1 -
 2 files changed, 5 insertions(+), 19 deletions(-)

diff --git a/src/plugins/screencast/screencaststream.cpp b/src/plugins/screencast/screencaststream.cpp
index 7135da91d4..622fa9a61a 100644
--- a/src/plugins/screencast/screencaststream.cpp
+++ b/src/plugins/screencast/screencaststream.cpp
@@ -569,21 +569,18 @@ void ScreenCastStream::recordFrame(const QRegion &_damagedRegion)
             if (m_cursor.texture) {
                 GLFramebuffer::pushFramebuffer(buf->framebuffer());
 
-                QRect r(QPoint(), size);
                 auto shader = ShaderManager::instance()->pushShader(ShaderTrait::MapTexture);
 
+                const QRectF cursorRect = scaledRect(cursor->geometry().translated(-m_cursor.viewport.topLeft()), m_cursor.scale);
                 QMatrix4x4 mvp;
-                mvp.ortho(r);
-                shader->setUniform(GLShader::ModelViewProjectionMatrix, mvp);
-
-                m_cursor.texture->setContentTransform(TextureTransforms());
-                const auto cursorRect = cursorGeometry(cursor);
-                mvp.translate(cursorRect.left(), r.height() - cursorRect.top() - m_cursor.texture->height());
+                mvp.scale(1, -1);
+                mvp.ortho(QRectF(QPointF(0, 0), size));
+                mvp.translate(cursorRect.x(), cursorRect.y());
                 shader->setUniform(GLShader::ModelViewProjectionMatrix, mvp);
 
                 glEnable(GL_BLEND);
                 glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
-                m_cursor.texture->render(cursorRect.size(), m_cursor.scale);
+                m_cursor.texture->render(cursorRect.size(), 1);
                 glDisable(GL_BLEND);
 
                 ShaderManager::instance()->popShader();
@@ -804,16 +801,6 @@ spa_pod *ScreenCastStream::buildFormat(struct spa_pod_builder *b, enum spa_video
     return (spa_pod *)spa_pod_builder_pop(b, &f[0]);
 }
 
-QRectF ScreenCastStream::cursorGeometry(Cursor *cursor) const
-{
-    if (!m_cursor.texture) {
-        return {};
-    }
-
-    const auto position = (cursor->pos() - m_cursor.viewport.topLeft() - cursor->hotspot()) * m_cursor.scale;
-    return QRectF{position, m_cursor.texture->size()};
-}
-
 void ScreenCastStream::sendCursorData(Cursor *cursor, spa_meta_cursor *spa_meta_cursor)
 {
     if (!cursor || !spa_meta_cursor) {
diff --git a/src/plugins/screencast/screencaststream.h b/src/plugins/screencast/screencaststream.h
index 19a4e541be..f53fea999d 100644
--- a/src/plugins/screencast/screencaststream.h
+++ b/src/plugins/screencast/screencaststream.h
@@ -133,7 +133,6 @@ public Q_SLOTS:
         bool visible = false;
         bool invalid = true;
     } m_cursor;
-    QRectF cursorGeometry(Cursor *cursor) const;
 
     QHash<struct pw_buffer *, std::shared_ptr<ScreenCastDmaBufTexture>> m_dmabufDataForPwBuffer;
 

From 19c642560764757e0428209f1de22eae626bb74c Mon Sep 17 00:00:00 2001
From: Vlad Zahorodnii <vlad.zahorodnii@kde.org>
Date: Wed, 29 Nov 2023 10:39:57 +0200
Subject: [PATCH 2/7] plugins/screencast: Use bilinear min/mag filter

Use GL_LINEAR so region screencasts look nicer when the output content
is magnified or minified.
---
 src/plugins/screencast/regionscreencastsource.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/plugins/screencast/regionscreencastsource.cpp b/src/plugins/screencast/regionscreencastsource.cpp
index 5e75225a55..de9f537459 100644
--- a/src/plugins/screencast/regionscreencastsource.cpp
+++ b/src/plugins/screencast/regionscreencastsource.cpp
@@ -82,6 +82,9 @@ void RegionScreenCastSource::ensureTexture()
         if (!m_renderedTexture) {
             return;
         }
+        m_renderedTexture->setFilter(GL_LINEAR);
+        m_renderedTexture->setWrapMode(GL_CLAMP_TO_EDGE);
+
         m_target = std::make_unique<GLFramebuffer>(m_renderedTexture.get());
         const auto allOutputs = workspace()->outputs();
         for (auto output : allOutputs) {

From c0b387bf5e76fa488c147eb5d7b7b23ad19b2b78 Mon Sep 17 00:00:00 2001
From: Vlad Zahorodnii <vlad.zahorodnii@kde.org>
Date: Wed, 29 Nov 2023 11:31:51 +0200
Subject: [PATCH 3/7] backends: Drop waylandServer dependency

Backends dependending on the wayland server is not great, it makes them
less reusable and creates a strict instantion order that doesn't fully
make sense.
---
 src/backends/wayland/wayland_output.cpp            | 3 +--
 src/backends/x11/windowed/x11_windowed_backend.cpp | 3 +--
 src/main_wayland.cpp                               | 1 +
 3 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/backends/wayland/wayland_output.cpp b/src/backends/wayland/wayland_output.cpp
index 9c5d6e3dc4..8d9713ad95 100644
--- a/src/backends/wayland/wayland_output.cpp
+++ b/src/backends/wayland/wayland_output.cpp
@@ -13,7 +13,6 @@
 #include "core/renderloop_p.h"
 #include "wayland_backend.h"
 #include "wayland_display.h"
-#include "wayland_server.h"
 
 #include <KWayland/Client/compositor.h>
 #include <KWayland/Client/pointer.h>
@@ -280,7 +279,7 @@ void WaylandOutput::updateWindowTitle()
     }
 
     QString title = i18nc("Title of nested KWin Wayland with Wayland socket identifier as argument",
-                          "KDE Wayland Compositor %1 (%2)", name(), waylandServer()->socketName());
+                          "KDE Wayland Compositor %1", name());
 
     if (!isEnabled()) {
         title += i18n("- Output disabled");
diff --git a/src/backends/x11/windowed/x11_windowed_backend.cpp b/src/backends/x11/windowed/x11_windowed_backend.cpp
index 4d217855f6..cb1bd4fcd5 100644
--- a/src/backends/x11/windowed/x11_windowed_backend.cpp
+++ b/src/backends/x11/windowed/x11_windowed_backend.cpp
@@ -13,7 +13,6 @@
 #include <config-kwin.h>
 
 #include "utils/xcbutils.h"
-#include "wayland_server.h"
 #include "x11_windowed_egl_backend.h"
 #include "x11_windowed_logging.h"
 #include "x11_windowed_output.h"
@@ -514,7 +513,7 @@ void X11WindowedBackend::grabKeyboard(xcb_timestamp_t time)
 void X11WindowedBackend::updateWindowTitle()
 {
     const QString grab = m_keyboardGrabbed ? i18n("Press right control to ungrab input") : i18n("Press right control key to grab input");
-    const QString title = QStringLiteral("%1 (%2) - %3").arg(i18n("KDE Wayland Compositor"), waylandServer()->socketName(), grab);
+    const QString title = QStringLiteral("%1 - %2").arg(i18n("KDE Wayland Compositor"), grab);
     for (auto it = m_outputs.constBegin(); it != m_outputs.constEnd(); ++it) {
         (*it)->setWindowTitle(title);
     }
diff --git a/src/main_wayland.cpp b/src/main_wayland.cpp
index c8585bc128..cf5ec0831a 100644
--- a/src/main_wayland.cpp
+++ b/src/main_wayland.cpp
@@ -510,6 +510,7 @@ int main(int argc, char *argv[])
             std::cerr << "FATAL ERROR: could not add wayland socket " << qPrintable(socketName) << std::endl;
             return 1;
         }
+        qInfo() << "Accepting client connections on sockets:" << server->display()->socketNames();
     }
 
     if (!server->init(flags)) {

From 5e90452d0870e2ef3fcd4d6af1b5e41c07ca20c5 Mon Sep 17 00:00:00 2001
From: Vlad Zahorodnii <vlad.zahorodnii@kde.org>
Date: Tue, 28 Nov 2023 22:08:53 +0200
Subject: [PATCH 4/7] Add more closed window checks

The stack contains closed windows, so we need to guard against them.

BUG: 475423
---
 src/layers.cpp | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

diff --git a/src/layers.cpp b/src/layers.cpp
index 505604e659..91f567e6ab 100644
--- a/src/layers.cpp
+++ b/src/layers.cpp
@@ -232,7 +232,7 @@ Window *Workspace::topWindowOnDesktop(VirtualDesktop *desktop, Output *output, b
     }
     for (int i = list.size() - 1; i >= 0; --i) {
         auto window = list.at(i);
-        if (!window->isClient()) {
+        if (!window->isClient() || window->isDeleted()) {
             continue;
         }
         if (window->isOnDesktop(desktop) && window->isShown() && window->isOnCurrentActivity() && !window->isShade()) {
@@ -256,12 +256,18 @@ Window *Workspace::findDesktop(bool topmost, VirtualDesktop *desktop) const
     if (topmost) {
         for (int i = stacking_order.size() - 1; i >= 0; i--) {
             auto window = stacking_order.at(i);
+            if (window->isDeleted()) {
+                continue;
+            }
             if (window->isClient() && window->isOnDesktop(desktop) && window->isDesktop() && window->isShown()) {
                 return window;
             }
         }
     } else { // bottom-most
         for (Window *window : std::as_const(stacking_order)) {
+            if (window->isDeleted()) {
+                continue;
+            }
             if (window->isClient() && window->isOnDesktop(desktop) && window->isDesktop() && window->isShown()) {
                 return window;
             }
@@ -330,7 +336,7 @@ void Workspace::lowerWindowWithinApplication(Window *window)
     // first try to put it below the bottom-most window of the application
     for (auto it = unconstrained_stacking_order.begin(); it != unconstrained_stacking_order.end(); ++it) {
         auto other = *it;
-        if (!other->isClient()) {
+        if (!other->isClient() || other->isDeleted()) {
             continue;
         }
         if (Window::belongToSameApplication(other, window)) {
@@ -386,7 +392,7 @@ void Workspace::raiseWindowWithinApplication(Window *window)
     // first try to put it above the top-most window of the application
     for (int i = unconstrained_stacking_order.size() - 1; i > -1; --i) {
         auto other = unconstrained_stacking_order.at(i);
-        if (!other->isClient()) {
+        if (!other->isClient() || other->isDeleted()) {
             continue;
         }
         if (other == window) { // don't lower it just because it asked to be raised
@@ -473,7 +479,7 @@ void Workspace::restoreSessionStackingOrder(X11Window *window)
     unconstrained_stacking_order.removeAll(window);
     for (auto it = unconstrained_stacking_order.begin(); it != unconstrained_stacking_order.end(); ++it) {
         X11Window *current = qobject_cast<X11Window *>(*it);
-        if (!current || current->isUnmanaged()) {
+        if (!current || current->isDeleted() || current->isUnmanaged()) {
             continue;
         }
         if (current->sessionStackingOrder() > window->sessionStackingOrder()) {

From 2b29e702dc5fd61d31933140b042b8d053ae307f Mon Sep 17 00:00:00 2001
From: l10n daemon script <scripty@kde.org>
Date: Wed, 29 Nov 2023 14:10:58 +0000
Subject: [PATCH 5/7] SVN_SILENT made messages (.desktop file) - always resolve
 ours

In case of conflict in i18n, keep the version of the branch "ours"
To resolve a particular conflict, "git checkout --ours path/to/file.desktop"
---
 src/helpers/killer/org.kde.kwin.killer.desktop.in |  4 ++++
 src/plugins/shakecursor/metadata.json             | 12 +++++++++++-
 2 files changed, 15 insertions(+), 1 deletion(-)

diff --git a/src/helpers/killer/org.kde.kwin.killer.desktop.in b/src/helpers/killer/org.kde.kwin.killer.desktop.in
index a688811ff3..8cc51971fc 100755
--- a/src/helpers/killer/org.kde.kwin.killer.desktop.in
+++ b/src/helpers/killer/org.kde.kwin.killer.desktop.in
@@ -7,6 +7,7 @@ Name[ca@valencia]=Ajudant de matar de KWin
 Name[eo]=KWin Kill-Helpilo
 Name[es]=Aplicación auxiliar Kill de KWin
 Name[eu]=KWin akabatzeko laguntzailea
+Name[he]=מסייע למחסל של KWin
 Name[ia]=Adjutante a occider (Kill) de KWin
 Name[ka]=KWin-ის მოკვლის დამხმარე პროგრამა
 Name[nl]=KWin-hulpprogramma voor kill (afbreken)
@@ -14,6 +15,7 @@ Name[sl]=Kwin pomočnik odstranjevalnika
 Name[tr]=KWin Öldürme Yardımcısı
 Name[uk]=Допоміжний засіб переривання KWin
 Name[x-test]=xxKWin Kill Helperxx
+Name[zh_TW]=KWin 強制中止工具程式
 Comment=Prompts whether to kill an unresponsive window
 Comment[bg]=Запитва дали да прекрати принудително прозорец, който не реагира
 Comment[ca]=Demana si cal matar una finestra que no respon
@@ -21,6 +23,7 @@ Comment[ca@valencia]=Demana si cal matar una finestra que no respon
 Comment[eo]=Pridemandas ĉu ĉesigi nerespondantan fenestron
 Comment[es]=Pregunta si se debe matar una ventana que no responde
 Comment[eu]=Erantzuten ez duen leiho bat akabatzeko aukera ematen du
+Comment[he]=שואל האם לחסל חלון לא פעיל
 Comment[ia]=Demanda si occider un fenestra non respondente
 Comment[ka]=გკითხავთ, მოვკლა თუ არა ფანჯარა, რომელიც არ პასუხობს
 Comment[nl]=Vraagt of een niet responderend venster afgebroken moet worden
@@ -28,6 +31,7 @@ Comment[sl]=Pozove, ali naj se odstrani neodzivno okno
 Comment[tr]=Yanıt vermeyen bir pencereyi öldürüp öldürmek istemediğinizi sorar
 Comment[uk]=Надсилає запит щодо переривання програми у вікні, яке не відповідає на запити
 Comment[x-test]=xxPrompts whether to kill an unresponsive windowxx
+Comment[zh_TW]=詢問是否要強制中止某個沒有回應的視窗
 Exec=@KWIN_KILLER_BIN@
 Terminal=false
 NoDisplay=true
diff --git a/src/plugins/shakecursor/metadata.json b/src/plugins/shakecursor/metadata.json
index b4ec1fd9d3..c5a32aba73 100644
--- a/src/plugins/shakecursor/metadata.json
+++ b/src/plugins/shakecursor/metadata.json
@@ -2,8 +2,18 @@
     "KPlugin": {
         "Category": "Accessibility",
         "Description": "Makes the cursor larger when the pointer is quickly moved back and forth",
+        "Description[he]": "מגדיל את הסמן בעת הזזת המצביע הלוך ושוב במהירות",
+        "Description[ka]": "კურსორის გადიდება, როცა მას წინ და უკან სწრაფად გააქანებთ",
+        "Description[uk]": "Робити курсор більшим, коли вказівник швидко рухається туди-сюди",
+        "Description[x-test]": "xxMakes the cursor larger when the pointer is quickly moved back and forthxx",
+        "Description[zh_TW]": "快速來回移動游標時讓游標變大",
         "EnabledByDefault": false,
         "License": "GPL",
-        "Name": "Shake Cursor"
+        "Name": "Shake Cursor",
+        "Name[he]": "ניעור סמן",
+        "Name[ka]": "კურსორის ჯანჯღარი",
+        "Name[uk]": "Бовтанка курсора",
+        "Name[x-test]": "xxShake Cursorxx",
+        "Name[zh_TW]": "甩動游標"
     }
 }

From 646b508efe9cab779a1e66d1c0eb9d142bc27768 Mon Sep 17 00:00:00 2001
From: l10n daemon script <scripty@kde.org>
Date: Wed, 29 Nov 2023 14:17:09 +0000
Subject: [PATCH 6/7] GIT_SILENT Sync po/docbooks with svn

---
 po/he/kcm_kwinxwayland.po    |  9 +++--
 po/he/kwin.po                | 39 +++++++++-------------
 po/ka/kcm_kwinxwayland.po    |  9 +++--
 po/sl/kwin.po                |  6 ++--
 po/uk/kcm_kwinxwayland.po    |  9 +++--
 po/zh_TW/kcm_kwinxwayland.po | 11 +++---
 po/zh_TW/kwin.po             | 65 ++++++++++++++++--------------------
 7 files changed, 63 insertions(+), 85 deletions(-)

diff --git a/po/he/kcm_kwinxwayland.po b/po/he/kcm_kwinxwayland.po
index 45074f3fdb..17ca615add 100644
--- a/po/he/kcm_kwinxwayland.po
+++ b/po/he/kcm_kwinxwayland.po
@@ -7,14 +7,14 @@ msgstr ""
 "Project-Id-Version: kwin\n"
 "Report-Msgid-Bugs-To: https://bugs.kde.org\n"
 "POT-Creation-Date: 2023-11-29 01:38+0000\n"
-"PO-Revision-Date: 2023-11-07 15:51+0200\n"
+"PO-Revision-Date: 2023-11-29 14:10+0200\n"
 "Last-Translator: Yaron Shahrabani <sh.yaron@gmail.com>\n"
 "Language-Team: צוות התרגום של KDE ישראל\n"
 "Language: he\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Generator: Lokalize 23.08.1\n"
+"X-Generator: Lokalize 23.08.3\n"
 "Plural-Forms: nplurals=4; plural=(n == 1) ? 0 : ((n == 2) ? 1 : ((n > 10 && "
 "n % 10 == 0) ? 2 : 3));\n"
 
@@ -47,11 +47,10 @@ msgid "Only non-character keys"
 msgstr "רק מקשים בלי תווים"
 
 #: ui/main.qml:71
-#, fuzzy, kde-format
-#| msgid "As above, plus any key typed while a modifier key is pressed"
+#, kde-format
 msgid ""
 "As above, plus any key typed while the Control, Alt, or Meta keys are pressed"
-msgstr "כמו לעיל, בתוספת המקשים שנלחצים יחד עם מקש ההחלפה"
+msgstr "כמו לעיל, בתוספת המקשים שנלחצים יחד עם המקשים Ctrl,‏ Alt או מטא"
 
 #: ui/main.qml:75
 #, kde-format
diff --git a/po/he/kwin.po b/po/he/kwin.po
index e792c3cf45..7a52e14d37 100644
--- a/po/he/kwin.po
+++ b/po/he/kwin.po
@@ -19,7 +19,7 @@ msgstr ""
 "Project-Id-Version: kwin\n"
 "Report-Msgid-Bugs-To: https://bugs.kde.org\n"
 "POT-Creation-Date: 2023-11-29 01:38+0000\n"
-"PO-Revision-Date: 2023-11-23 11:38+0200\n"
+"PO-Revision-Date: 2023-11-29 14:12+0200\n"
 "Last-Translator: Yaron Shahrabani <sh.yaron@gmail.com>\n"
 "Language-Team: צוות התרגום של KDE ישראל\n"
 "Language: he\n"
@@ -1164,7 +1164,7 @@ msgctxt "@info"
 msgid ""
 "<para><application>%1</application> is not responding. Do you want to "
 "terminate this application?</para>"
-msgstr ""
+msgstr "<para><application>%1</application> לא מגיב. לחסל את היישום?</para>"
 
 #: helpers/killer/killer.cpp:150
 #, kde-kuit-format
@@ -1173,56 +1173,47 @@ msgid ""
 "<para>\"%1\" of <application>%2</application> is not responding. Do you want "
 "to terminate this application?</para>"
 msgstr ""
+"<para>„%1” של <application>%2</application> לא מגיב. לחסל את היישום?</para>"
 
 #: helpers/killer/killer.cpp:153
-#, fuzzy, kde-kuit-format
-#| msgctxt "@info"
-#| msgid ""
-#| "<para>Do you want to terminate this application?</"
-#| "para><para><warning>Terminating the application will close all of its "
-#| "child windows. Any unsaved data will be lost.</warning></para>"
+#, kde-kuit-format
 msgctxt "@info"
 msgid ""
 "<para><emphasis strong='true'>Terminating this application will close all of "
 "its windows. Any unsaved data will be lost.</emphasis></para>"
 msgstr ""
-"<para>לחסל את היישום הזה?</para><para><warning>חיסול היישום יסגור את כל "
-"החלונות הצאצאיים שלו. כל השינויים שלא שמרת יעלמו.</warning></para>"
+"<para><emphasis strong='true'>חיסול היישום הזה יסגור את כל החלונות שלו. "
+"נתונים שלא נשמרו ילכו לאיבוד.</emphasis></para>"
 
 #: helpers/killer/killer.cpp:155
-#, fuzzy, kde-format
-#| msgid "&Terminate Application %1"
+#, kde-format
 msgctxt "@action:button Terminate app"
 msgid "&Terminate %1"
-msgstr "&חיסול היישום %1"
+msgstr "&חיסול %1"
 
 #: helpers/killer/killer.cpp:156
-#, fuzzy, kde-format
-#| msgid "Wait Longer"
+#, kde-format
 msgctxt "@action:button Wait for frozen app to maybe respond again"
 msgid "&Wait Longer"
-msgstr "להמתין עוד קצת"
+msgstr "להמתין עוד &קצת"
 
 #: helpers/killer/killer.cpp:164
-#, fuzzy, kde-format
-#| msgctxt "Application is not responding, appended to window title"
-#| msgid "(Not Responding)"
+#, kde-format
 msgctxt "@title:window"
 msgid "Not Responding"
-msgstr "(לא מגיב)"
+msgstr "לא מגיב"
 
 #: helpers/killer/killer.cpp:180
 #, kde-format
 msgctxt "@info"
 msgid "Process ID: %1"
-msgstr ""
+msgstr "מזהה תהליך: %1"
 
 #: helpers/killer/killer.cpp:182
-#, fuzzy, kde-format
-#| msgid "hostname"
+#, kde-format
 msgctxt "@info"
 msgid "Host name: %1"
-msgstr "שם מארח (hostname)"
+msgstr "שם מארח: %1"
 
 #: input.cpp:2022
 #, kde-format
diff --git a/po/ka/kcm_kwinxwayland.po b/po/ka/kcm_kwinxwayland.po
index 9ee3bb6211..ab88c271bb 100644
--- a/po/ka/kcm_kwinxwayland.po
+++ b/po/ka/kcm_kwinxwayland.po
@@ -8,7 +8,7 @@ msgstr ""
 "Project-Id-Version: kwin\n"
 "Report-Msgid-Bugs-To: https://bugs.kde.org\n"
 "POT-Creation-Date: 2023-11-29 01:38+0000\n"
-"PO-Revision-Date: 2023-11-08 03:02+0100\n"
+"PO-Revision-Date: 2023-11-29 05:33+0100\n"
 "Last-Translator: Temuri Doghonadze <temuri.doghonadze@gmail.com>\n"
 "Language-Team: Georgian <kde-i18n-doc@kde.org>\n"
 "Language: ka\n"
@@ -51,13 +51,12 @@ msgid "Only non-character keys"
 msgstr "მხოლოდ არა-სიმბოლოს ღილაკები"
 
 #: ui/main.qml:71
-#, fuzzy, kde-format
-#| msgid "As above, plus any key typed while a modifier key is pressed"
+#, kde-format
 msgid ""
 "As above, plus any key typed while the Control, Alt, or Meta keys are pressed"
 msgstr ""
-"როგორც ზემოთ, დამატებით ნებისმიერი ღილაკი, რომელზეც მოდიფიკატორ ღილაკთან "
-"ერთად დააჭირეთ"
+"როგორც ზემოთ, დამატებით ნებისმიერი ღილაკი, რომელზეც Ctrl, Alt ან Meta "
+"ღილაკთან ერთად დააჭირეთ"
 
 #: ui/main.qml:75
 #, kde-format
diff --git a/po/sl/kwin.po b/po/sl/kwin.po
index 1ee82171f0..7dc3048e60 100644
--- a/po/sl/kwin.po
+++ b/po/sl/kwin.po
@@ -1,7 +1,7 @@
 # translation of kwin.po to
 # Translation of kwin.po to Slovenian
 # Copyright (C) 2001, 2003, 2004, 2005, 2007 Free Software Foundation, Inc.
-# $Id: kwin.po 1666042 2023-11-29 02:02:34Z scripty $
+# $Id: kwin.po 1666044 2023-11-29 02:19:54Z scripty $
 # $Source$
 #
 #
@@ -24,8 +24,8 @@ msgstr ""
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=4; plural=(n%100==1 ? 0 : n%100==2 ? 1 : n%100>=3 && n"
-"%100<=4 ? 2 : 3);\n"
+"Plural-Forms: nplurals=4; plural=(n%100==1 ? 1 : n%100==2 ? 2 : n%100==3 || n"
+"%100==4 ? 3 : 0);\n"
 "Translator: Andrej Mernik <andrejm@ubuntu.si>\n"
 "X-Generator: Poedit 3.4.1\n"
 
diff --git a/po/uk/kcm_kwinxwayland.po b/po/uk/kcm_kwinxwayland.po
index 55e1636e43..e33d22d625 100644
--- a/po/uk/kcm_kwinxwayland.po
+++ b/po/uk/kcm_kwinxwayland.po
@@ -7,7 +7,7 @@ msgstr ""
 "Project-Id-Version: kwin\n"
 "Report-Msgid-Bugs-To: https://bugs.kde.org\n"
 "POT-Creation-Date: 2023-11-29 01:38+0000\n"
-"PO-Revision-Date: 2023-11-07 13:20+0200\n"
+"PO-Revision-Date: 2023-11-29 09:53+0200\n"
 "Last-Translator: Yuri Chornoivan <yurchor@ukr.net>\n"
 "Language-Team: Ukrainian <kde-i18n-uk@kde.org>\n"
 "Language: uk\n"
@@ -49,13 +49,12 @@ msgid "Only non-character keys"
 msgstr "Лише клавіші, які не пов'язано з літерами"
 
 #: ui/main.qml:71
-#, fuzzy, kde-format
-#| msgid "As above, plus any key typed while a modifier key is pressed"
+#, kde-format
 msgid ""
 "As above, plus any key typed while the Control, Alt, or Meta keys are pressed"
 msgstr ""
-"Те саме, що і вище, і ще будь-які клавіші, які натиснуто разом із "
-"модифікатором"
+"Те саме, що і вище, і ще будь-які клавіші, які натиснуто разом із клавішами "
+"Control, Alt або Meta"
 
 #: ui/main.qml:75
 #, kde-format
diff --git a/po/zh_TW/kcm_kwinxwayland.po b/po/zh_TW/kcm_kwinxwayland.po
index 21e8284d01..42dc89b226 100644
--- a/po/zh_TW/kcm_kwinxwayland.po
+++ b/po/zh_TW/kcm_kwinxwayland.po
@@ -7,15 +7,15 @@ msgstr ""
 "Project-Id-Version: kwin\n"
 "Report-Msgid-Bugs-To: https://bugs.kde.org\n"
 "POT-Creation-Date: 2023-11-29 01:38+0000\n"
-"PO-Revision-Date: 2023-11-10 22:53+0900\n"
+"PO-Revision-Date: 2023-11-29 18:04+0900\n"
 "Last-Translator: Kisaragi Hiu <mail@kisaragi-hiu.com>\n"
-"Language-Team: Traditional Chinese <zh-l10n@linux.org.tw>\n"
+"Language-Team: Traditional Chinese <zh-l10n@lists.slat.org>\n"
 "Language: zh_TW\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=1; plural=0;\n"
-"X-Generator: Lokalize 23.08.2\n"
+"X-Generator: Lokalize 23.08.3\n"
 
 #: ui/main.qml:47
 #, kde-format
@@ -45,11 +45,10 @@ msgid "Only non-character keys"
 msgstr "僅非字元按鍵"
 
 #: ui/main.qml:71
-#, fuzzy, kde-format
-#| msgid "As above, plus any key typed while a modifier key is pressed"
+#, kde-format
 msgid ""
 "As above, plus any key typed while the Control, Alt, or Meta keys are pressed"
-msgstr "同上，加上按下修飾鍵時所輸入的任何按鍵"
+msgstr "同上，加上按下 Control、Alt 或 Meta 鍵時所輸入的任何按鍵"
 
 #: ui/main.qml:75
 #, kde-format
diff --git a/po/zh_TW/kwin.po b/po/zh_TW/kwin.po
index 13f0e403f6..9306d0e813 100644
--- a/po/zh_TW/kwin.po
+++ b/po/zh_TW/kwin.po
@@ -17,14 +17,14 @@ msgstr ""
 "Project-Id-Version: kwin\n"
 "Report-Msgid-Bugs-To: https://bugs.kde.org\n"
 "POT-Creation-Date: 2023-11-29 01:38+0000\n"
-"PO-Revision-Date: 2023-11-10 23:00+0900\n"
+"PO-Revision-Date: 2023-11-29 18:07+0900\n"
 "Last-Translator: Kisaragi Hiu <mail@kisaragi-hiu.com>\n"
 "Language-Team: Traditional Chinese <zh-l10n@lists.slat.org>\n"
 "Language: zh_TW\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Generator: Lokalize 23.08.2\n"
+"X-Generator: Lokalize 23.08.3\n"
 "Plural-Forms: nplurals=1; plural=0;\n"
 
 #, kde-format
@@ -1163,6 +1163,8 @@ msgid ""
 "<para><application>%1</application> is not responding. Do you want to "
 "terminate this application?</para>"
 msgstr ""
+"<para><application>%1</application>沒有回應。您是否要終止這個應用程式？</"
+"para>"
 
 #: helpers/killer/killer.cpp:150
 #, kde-kuit-format
@@ -1171,56 +1173,48 @@ msgid ""
 "<para>\"%1\" of <application>%2</application> is not responding. Do you want "
 "to terminate this application?</para>"
 msgstr ""
+"<para><application>%2</application> 的「%1」沒有回應。您是否要終止這個應用程"
+"式？</para>"
 
 #: helpers/killer/killer.cpp:153
-#, fuzzy, kde-kuit-format
-#| msgctxt "@info"
-#| msgid ""
-#| "<para>Do you want to terminate this application?</"
-#| "para><para><warning>Terminating the application will close all of its "
-#| "child windows. Any unsaved data will be lost.</warning></para>"
+#, kde-kuit-format
 msgctxt "@info"
 msgid ""
 "<para><emphasis strong='true'>Terminating this application will close all of "
 "its windows. Any unsaved data will be lost.</emphasis></para>"
 msgstr ""
-"<para>您要中止此應用程式嗎？</para><para><warning>中止此應用程式將會關閉它所"
-"有的子視窗。所有未儲存的資料將會遺失。</warning></para>"
+"<para><emphasis strong='true'>終止此應用程式將會關閉它的所有視窗。所有未儲存"
+"的資料將會遺失。</emphasis></para>"
 
 #: helpers/killer/killer.cpp:155
-#, fuzzy, kde-format
-#| msgid "&Terminate Application %1"
+#, kde-format
 msgctxt "@action:button Terminate app"
 msgid "&Terminate %1"
-msgstr "終止應用程式 %1(&T)"
+msgstr "終止 %1(&T)"
 
 #: helpers/killer/killer.cpp:156
-#, fuzzy, kde-format
-#| msgid "Wait Longer"
+#, kde-format
 msgctxt "@action:button Wait for frozen app to maybe respond again"
 msgid "&Wait Longer"
-msgstr "等久一點"
+msgstr "等久一點(&W)"
 
 #: helpers/killer/killer.cpp:164
-#, fuzzy, kde-format
-#| msgctxt "Application is not responding, appended to window title"
-#| msgid "(Not Responding)"
+#, kde-format
 msgctxt "@title:window"
 msgid "Not Responding"
-msgstr "（沒有回應）"
+msgstr "沒有回應"
 
 #: helpers/killer/killer.cpp:180
 #, kde-format
 msgctxt "@info"
 msgid "Process ID: %1"
-msgstr ""
+msgstr "行程 ID：%1"
 
 #: helpers/killer/killer.cpp:182
-#, fuzzy, kde-format
-#| msgid "hostname"
+#, kde-format
 msgctxt "@info"
 msgid "Host name: %1"
-msgstr "主機名稱"
+msgstr "主機名稱：%1"
 
 #: input.cpp:2022
 #, kde-format
@@ -2212,26 +2206,21 @@ msgid "Arrow draw modifier keys:"
 msgstr "箭頭繪製修飾鍵："
 
 #: plugins/nightcolor/nightcolormanager.cpp:64
-#, fuzzy, kde-format
-#| msgctxt "Night Color was disabled"
-#| msgid "Night Color Off"
+#, kde-format
 msgctxt "Night Light was disabled"
 msgid "Night Light Off"
-msgstr "夜色模式關閉"
+msgstr "夜光模式關閉"
 
 #: plugins/nightcolor/nightcolormanager.cpp:65
-#, fuzzy, kde-format
-#| msgctxt "Night Color was enabled"
-#| msgid "Night Color On"
+#, kde-format
 msgctxt "Night Light was enabled"
 msgid "Night Light On"
-msgstr "夜色模式開啟"
+msgstr "夜光模式開啟"
 
 #: plugins/nightcolor/nightcolormanager.cpp:86
-#, fuzzy, kde-format
-#| msgid "Toggle Night Color"
+#, kde-format
 msgid "Toggle Night Light"
-msgstr "切換夜色模式"
+msgstr "切換夜光模式"
 
 #: plugins/nightcolor/nightcolormanager.cpp:463
 #, kde-format
@@ -3537,18 +3526,20 @@ msgid ""
 "The following applications did not close:\n"
 "%1"
 msgstr ""
+"以下應用程式並未關閉：\n"
+"%1"
 
 #: sm.cpp:470
 #, kde-format
 msgctxt "@action:button"
 msgid "Cancel Logout"
-msgstr ""
+msgstr "取消登出"
 
 #: sm.cpp:471
 #, kde-format
 msgctxt "@action::button"
 msgid "Log Out Anyway"
-msgstr ""
+msgstr "還是要登出"
 
 #: tabbox/clientmodel.cpp:58
 #, kde-format

From 778792027722d66d67dd1e666826599c96c0ef85 Mon Sep 17 00:00:00 2001
From: Vlad Zahorodnii <vlad.zahorodnii@kde.org>
Date: Wed, 29 Nov 2023 11:12:41 +0200
Subject: [PATCH 7/7] cmake: Improve readability

Indent target_link_libraries of kwin to improve code readability. As is,
PUBLIC and PRIVATE blend with target names and therefore they are harder
to spot.
---
 src/CMakeLists.txt | 94 +++++++++++++++++++++++-----------------------
 1 file changed, 46 insertions(+), 48 deletions(-)

diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 1983176022..90c52ab3b2 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -226,56 +226,54 @@ target_sources(kwin PRIVATE
 
 target_link_libraries(kwin
     PUBLIC
-
-    Qt::DBus
-    Qt::Quick
-    Qt::Widgets
-    Wayland::Server
-    KF6::ConfigCore
-    KF6::CoreAddons
-    KF6::WindowSystem
-    epoxy::epoxy
+        Qt::DBus
+        Qt::Quick
+        Qt::Widgets
+        Wayland::Server
+        KF6::ConfigCore
+        KF6::CoreAddons
+        KF6::WindowSystem
+        epoxy::epoxy
 
     PRIVATE
-
-    Qt::Concurrent
-    Qt::Sensors
-    Qt::GuiPrivate
-
-    KF6::ConfigQml
-    KF6::ConfigWidgets
-    KF6::Crash
-    KF6::GlobalAccel
-    KF6::I18n
-    KF6::Package
-    KF6::Service
-
-    KDecoration2::KDecoration
-    KDecoration2::KDecoration2Private
-
-    XCB::COMPOSITE
-    XCB::CURSOR
-    XCB::DAMAGE
-    XCB::GLX
-    XCB::ICCCM
-    XCB::KEYSYMS
-    XCB::RANDR
-    XCB::RENDER
-    XCB::SHAPE
-    XCB::SHM
-    XCB::SYNC
-    XCB::XCB
-    XCB::XFIXES
-    XCB::XINERAMA
-
-    UDev::UDev
-    XKB::XKB
-    EGL::EGL
-    epoxy::epoxy
-
-    Threads::Threads
-    lcms2::lcms2
-    PkgConfig::libdisplayinfo
+        Qt::Concurrent
+        Qt::Sensors
+        Qt::GuiPrivate
+
+        KF6::ConfigQml
+        KF6::ConfigWidgets
+        KF6::Crash
+        KF6::GlobalAccel
+        KF6::I18n
+        KF6::Package
+        KF6::Service
+
+        KDecoration2::KDecoration
+        KDecoration2::KDecoration2Private
+
+        XCB::COMPOSITE
+        XCB::CURSOR
+        XCB::DAMAGE
+        XCB::GLX
+        XCB::ICCCM
+        XCB::KEYSYMS
+        XCB::RANDR
+        XCB::RENDER
+        XCB::SHAPE
+        XCB::SHM
+        XCB::SYNC
+        XCB::XCB
+        XCB::XFIXES
+        XCB::XINERAMA
+
+        UDev::UDev
+        XKB::XKB
+        EGL::EGL
+        epoxy::epoxy
+
+        Threads::Threads
+        lcms2::lcms2
+        PkgConfig::libdisplayinfo
 )
 
 if (TARGET K::KGlobalAccelD)
